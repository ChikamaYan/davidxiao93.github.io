!function(a){function b(a,b,c){return"string"==typeof a&&("%"==a.slice(-1)?a=parseInt(a.substring(0,a.length-1))/100*b:"vh"==a.slice(-2)?a=parseInt(a.substring(0,a.length-2))/100*c:"px"==a.slice(-2)&&(a=parseInt(a.substring(0,a.length-2)))),a}var c=a(window),d=1,e={};c.on("scroll",function(){var b=c.scrollTop();a.map(e,function(a){window.clearTimeout(a.timeoutId),a.timeoutId=window.setTimeout(function(){a.handler(b)},a.options.delay)})}).on("load",function(){c.trigger("scroll")}),jQuery.fn.scrollex=function(f){var g=a(this);if(0==this.length)return g;if(this.length>1){for(var h=0;h<this.length;h++)a(this[h]).scrollex(f);return g}if(g.data("_scrollexId"))return g;var i,j,k,l,m;switch(i=d++,j=jQuery.extend({top:0,bottom:0,delay:0,mode:"default",enter:null,leave:null,initialize:null,terminate:null,scroll:null},f),j.mode){case"top":k=function(a,b,c,d,e){return a>=d&&e>=a};break;case"bottom":k=function(a,b,c,d,e){return c>=d&&e>=c};break;case"middle":k=function(a,b,c,d,e){return b>=d&&e>=b};break;case"top-only":k=function(a,b,c,d){return d>=a&&c>=d};break;case"bottom-only":k=function(a,b,c,d,e){return c>=e&&e>=a};break;default:case"default":k=function(a,b,c,d,e){return c>=d&&e>=a}}return l=function(a){var d,e,f,g,h,i,j=this.state,k=!1,l=this.$element.offset();d=c.height(),e=a+d/2,f=a+d,g=this.$element.outerHeight(),h=l.top+b(this.options.top,g,d),i=l.top+g-b(this.options.bottom,g,d),k=this.test(a,e,f,h,i),k!=j&&(this.state=k,k?this.options.enter&&this.options.enter.apply(this.element):this.options.leave&&this.options.leave.apply(this.element)),this.options.scroll&&this.options.scroll.apply(this.element,[(e-h)/(i-h)])},m={id:i,options:j,test:k,handler:l,state:null,element:this,$element:g,timeoutId:null},e[i]=m,g.data("_scrollexId",m.id),m.options.initialize&&m.options.initialize.apply(this),g},jQuery.fn.unscrollex=function(){var b=a(this);if(0==this.length)return b;if(this.length>1){for(var c=0;c<this.length;c++)a(this[c]).unscrollex();return b}var d,f;return(d=b.data("_scrollexId"))?(f=e[d],window.clearTimeout(f.timeoutId),delete e[d],b.removeData("_scrollexId"),f.options.terminate&&f.options.terminate.apply(this),b):b}}(jQuery);